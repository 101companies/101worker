<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Recipies &mdash; Jinja Documentation</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="style.css" type="text/css">
  <style type="text/css">
    .syntax  { background: #ffffff; }
.syntax .c { color: #888888 } /* Comment */
.syntax .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.syntax .k { color: #008800; font-weight: bold } /* Keyword */
.syntax .cm { color: #888888 } /* Comment.Multiline */
.syntax .cp { color: #cc0000; font-weight: bold } /* Comment.Preproc */
.syntax .c1 { color: #888888 } /* Comment.Single */
.syntax .cs { color: #cc0000; font-weight: bold; background-color: #fff0f0 } /* Comment.Special */
.syntax .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.syntax .ge { font-style: italic } /* Generic.Emph */
.syntax .gr { color: #aa0000 } /* Generic.Error */
.syntax .gh { color: #303030 } /* Generic.Heading */
.syntax .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.syntax .go { color: #888888 } /* Generic.Output */
.syntax .gp { color: #555555 } /* Generic.Prompt */
.syntax .gs { font-weight: bold } /* Generic.Strong */
.syntax .gu { color: #606060 } /* Generic.Subheading */
.syntax .gt { color: #aa0000 } /* Generic.Traceback */
.syntax .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.syntax .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.syntax .kp { color: #008800 } /* Keyword.Pseudo */
.syntax .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.syntax .kt { color: #888888; font-weight: bold } /* Keyword.Type */
.syntax .m { color: #0000DD; font-weight: bold } /* Literal.Number */
.syntax .s { color: #dd2200; background-color: #fff0f0 } /* Literal.String */
.syntax .na { color: #336699 } /* Name.Attribute */
.syntax .nb { color: #003388 } /* Name.Builtin */
.syntax .nc { color: #bb0066; font-weight: bold } /* Name.Class */
.syntax .no { color: #003366; font-weight: bold } /* Name.Constant */
.syntax .nd { color: #555555 } /* Name.Decorator */
.syntax .ne { color: #bb0066; font-weight: bold } /* Name.Exception */
.syntax .nf { color: #0066bb; font-weight: bold } /* Name.Function */
.syntax .nl { color: #336699; font-style: italic } /* Name.Label */
.syntax .nn { color: #bb0066; font-weight: bold } /* Name.Namespace */
.syntax .py { color: #336699; font-weight: bold } /* Name.Property */
.syntax .nt { color: #bb0066; font-weight: bold } /* Name.Tag */
.syntax .nv { color: #336699 } /* Name.Variable */
.syntax .ow { color: #008800 } /* Operator.Word */
.syntax .w { color: #bbbbbb } /* Text.Whitespace */
.syntax .mf { color: #0000DD; font-weight: bold } /* Literal.Number.Float */
.syntax .mh { color: #0000DD; font-weight: bold } /* Literal.Number.Hex */
.syntax .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.syntax .mo { color: #0000DD; font-weight: bold } /* Literal.Number.Oct */
.syntax .sb { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Backtick */
.syntax .sc { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Char */
.syntax .sd { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Doc */
.syntax .s2 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Double */
.syntax .se { color: #0044dd; background-color: #fff0f0 } /* Literal.String.Escape */
.syntax .sh { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Heredoc */
.syntax .si { color: #3333bb; background-color: #fff0f0 } /* Literal.String.Interpol */
.syntax .sx { color: #22bb22; background-color: #f0fff0 } /* Literal.String.Other */
.syntax .sr { color: #008800; background-color: #fff0ff } /* Literal.String.Regex */
.syntax .s1 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Single */
.syntax .ss { color: #aa6600; background-color: #fff0f0 } /* Literal.String.Symbol */
.syntax .bp { color: #003388 } /* Name.Builtin.Pseudo */
.syntax .vc { color: #336699 } /* Name.Variable.Class */
.syntax .vg { color: #dd7700 } /* Name.Variable.Global */
.syntax .vi { color: #3333bb } /* Name.Variable.Instance */
.syntax .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
  </style>
</head>
<body>
  <div id="content">
    
      <h1 class="heading"><span>Jinja</span></h1>
      <h2 class="subheading">Recipies</h2>
    
    
    <div id="toc">
      <h2>Navigation</h2>
      <ul>
        <li><a href="index.html">back to index</a></li>
      </ul>
      
        <h2>Contents</h2>
        <ul class="contents">
        
          <li><a href="#alternating-rows">Alternating Rows</a></li>
        
          <li><a href="#active-menu-item">Active Menu Item</a></li>
        
          <li><a href="#sitemap">Sitemap</a></li>
        
          <li><a href="#using-a-block-multiple-times">Using A Block Multiple Times</a></li>
        
          <li><a href="#vim-syntax-highlighting">Vim Syntax Highlighting</a></li>
        
        </ul>
      
    </div>
    
    <div id="contentwrapper">
      <p>Here are some typical recipes for the usage of Jinja templates.</p>
<div class="section">
<h2><a id="alternating-rows" name="alternating-rows">Alternating Rows</a></h2>
<p>If you want to have different styles for each row of a table or
list you can use the <tt class="docutils literal"><span class="pre">cycle</span></tt> tag:</p>
<div class="syntax"><pre><span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">row</span> <span class="k">in</span> <span class="nv">sequence</span> <span class="cp">%}</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">cycle</span> <span class="s1">&#39;even&#39;</span><span class="o">,</span> <span class="s1">&#39;odd&#39;</span> <span class="cp">%}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">row</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">cycle</span></tt> can take an unlimited amount of strings. Each time this
tag is encountered the next item from the list is rendered.
If you pass it just one argument it's meant to be a sequence.</p>
</div>
<div class="section">
<h2><a id="active-menu-item" name="active-menu-item">Active Menu Item</a></h2>
<p>Often you want to have a navigation bar with an active navigation
item. This is really simple to achieve. Because <tt class="docutils literal"><span class="pre">set</span></tt> tags outside
of <tt class="docutils literal"><span class="pre">blocks</span></tt> are global you can do something like this:</p>
<p><strong>layout.html</strong>:</p>
<blockquote>
<div class="syntax"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">navigation_bar</span> <span class="o">=</span> <span class="o">[</span>
    <span class="o">(</span><span class="s1">&#39;/&#39;</span><span class="o">,</span> <span class="s1">&#39;index&#39;</span><span class="o">,</span> <span class="s1">&#39;Index&#39;</span><span class="o">),</span>
    <span class="o">(</span><span class="s1">&#39;/downloads/&#39;</span><span class="o">,</span> <span class="s1">&#39;downloads&#39;</span><span class="o">,</span> <span class="s1">&#39;Downloads&#39;</span><span class="o">),</span>
    <span class="o">(</span><span class="s1">&#39;/about/&#39;</span><span class="o">,</span> <span class="s1">&#39;about&#39;</span><span class="o">,</span> <span class="s1">&#39;About&#39;</span><span class="o">)</span>
<span class="o">]</span> <span class="cp">%}</span>
...
<span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;navigation&quot;</span><span class="nt">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">href</span><span class="o">,</span> <span class="nv">id</span><span class="o">,</span> <span class="nv">caption</span> <span class="k">in</span> <span class="nv">navigation_bar</span> <span class="cp">%}</span>
  <span class="nt">&lt;li</span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">id</span> <span class="o">==</span> <span class="nv">active_page</span> <span class="cp">%}</span> <span class="na">class=</span><span class="s">&quot;active&quot;</span><span class="cp">{%</span> <span class="k">endif</span>
  <span class="cp">%}</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">href</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">caption</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>/li&gt;
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
...
</pre></div>
</blockquote>
<p><strong>index.html</strong>:</p>
<blockquote>
<div class="syntax"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;layout.html&quot;</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">active_page</span> <span class="o">=</span> <span class="s2">&quot;index&quot;</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</blockquote>
</div>
<div class="section">
<h2><a id="sitemap" name="sitemap">Sitemap</a></h2>
<p>To create a sitemap you can either use the <tt class="docutils literal"><span class="pre">for</span></tt> tag or a <tt class="docutils literal"><span class="pre">macro</span></tt>
that calls itself. The datastructures should look like this:</p>
<div class="syntax"><pre><span class="p">{</span><span class="s">&#39;sitemap&#39;</span><span class="p">:</span> <span class="p">[</span>
    <span class="nb">dict</span><span class="p">(</span>
        <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Pages&#39;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="nb">dict</span><span class="p">(</span><span class="n">href</span><span class="o">=</span><span class="s">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Index&#39;</span><span class="p">),</span>
            <span class="nb">dict</span><span class="p">(</span><span class="n">href</span><span class="o">=</span><span class="s">&#39;downloads.html&#39;</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Downloads&#39;</span><span class="p">),</span>
            <span class="nb">dict</span><span class="p">(</span>
                <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Users&#39;</span><span class="p">,</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                    <span class="nb">dict</span><span class="p">(</span><span class="n">href</span><span class="o">=</span><span class="s">&#39;peter.html&#39;</span><span class="p">,</span>
                         <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Peter&#39;</span><span class="p">),</span>
                    <span class="nb">dict</span><span class="p">(</span><span class="n">href</span><span class="o">=</span><span class="s">&#39;max.html&#39;</span><span class="p">,</span>
                         <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Max&#39;</span><span class="p">),</span>
                    <span class="nb">dict</span><span class="p">(</span><span class="n">href</span><span class="o">=</span><span class="s">&#39;suzan.html&#39;</span><span class="p">,</span>
                         <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Suzan&#39;</span><span class="p">)</span>
                <span class="p">]</span>
            <span class="p">),</span>
            <span class="nb">dict</span><span class="p">(</span>
                <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Files&#39;</span><span class="p">,</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                    <span class="nb">dict</span><span class="p">(</span>
                        <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Images&#39;</span><span class="p">,</span>
                        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                            <span class="nb">dict</span><span class="p">(</span><span class="n">href</span><span class="o">=</span><span class="s">&#39;vienna.html&#39;</span><span class="p">,</span>
                                 <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Vienna&#39;</span><span class="p">),</span>
                            <span class="nb">dict</span><span class="p">(</span><span class="n">href</span><span class="o">=</span><span class="s">&#39;roma.html&#39;</span><span class="p">,</span>
                                 <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Roma&#39;</span><span class="p">),</span>
                            <span class="nb">dict</span><span class="p">(</span><span class="n">href</span><span class="o">=</span><span class="s">&#39;tokyo.html&#39;</span><span class="p">,</span>
                                 <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Tokyo&#39;</span><span class="p">)</span>
                        <span class="p">]</span>
                    <span class="p">),</span>
                    <span class="nb">dict</span><span class="p">(</span>
                        <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Videos&#39;</span><span class="p">,</span>
                        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                            <span class="nb">dict</span><span class="p">(</span><span class="n">href</span><span class="o">=</span><span class="s">&#39;party.html&#39;</span><span class="p">,</span>
                                 <span class="n">caption</span><span class="o">=</span><span class="s">&#39;Party&#39;</span><span class="p">)</span>
                        <span class="p">]</span>
                    <span class="p">)</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">),</span>
    <span class="nb">dict</span><span class="p">(</span><span class="n">caption</span><span class="o">=</span><span class="s">&#39;Foo&#39;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="s">&#39;foo.html&#39;</span><span class="p">)</span>
    <span class="nb">dict</span><span class="p">(</span><span class="n">caption</span><span class="o">=</span><span class="s">&#39;About&#39;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="s">&#39;about.html&#39;</span><span class="p">)</span>
<span class="p">]}</span>
</pre></div>
<p>Now you can create a sitemap using <tt class="docutils literal"><span class="pre">for</span></tt>:</p>
<div class="syntax"><pre><span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;sitemap&quot;</span><span class="nt">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">sitemap</span> <span class="k">recursive</span> <span class="cp">%}</span>
  <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">item.href</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">item.caption</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">item.children</span> <span class="cp">%}</span><span class="nt">&lt;ul&gt;</span><span class="cp">{{</span> <span class="nb">loop</span><span class="o">(</span><span class="nv">item.children</span><span class="o">)</span> <span class="cp">}}</span><span class="nt">&lt;/ul&gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
<p>Or by using a <tt class="docutils literal"><span class="pre">macro</span></tt> that calls itself:</p>
<div class="syntax"><pre><span class="cp">{%</span> <span class="k">macro</span> <span class="nv">render_sitemap</span> <span class="nv">items</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">items</span> <span class="cp">%}</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">item.href</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">item.caption</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">item.children</span> <span class="cp">%}</span><span class="nt">&lt;ul&gt;</span><span class="cp">{{</span> <span class="nv">render_sitemap</span><span class="o">(</span><span class="nv">item.children</span><span class="o">)</span> <span class="cp">}}</span><span class="nt">&lt;/ul&gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="nt">&lt;/li&gt;</span>
  <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endmacro</span> <span class="cp">%}</span>
<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;sitemap&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">render_sitemap</span><span class="o">(</span><span class="nv">sitemap</span><span class="o">)</span> <span class="cp">}}</span><span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<div class="section">
<h2><a id="using-a-block-multiple-times" name="using-a-block-multiple-times">Using A Block Multiple Times</a></h2>
<p>Blocks have the small disadvantage that they work both ways which is a problem
if you want to render a block two times on a page. Here a nice little
workaround for this limitation:</p>
<div class="syntax"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">filter</span> <span class="nf">capture</span><span class="o">(</span><span class="s1">&#39;title&#39;</span><span class="o">)</span> <span class="cp">%}{%</span>
              <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}{%</span>
              <span class="k">endfilter</span> <span class="cp">%}</span><span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
<p>Or if you use the <cite>capture</cite> filter in <cite>clean</cite> mode:</p>
<div class="syntax"><pre><span class="cp">{%</span> <span class="k">filter</span> <span class="nf">capture</span><span class="o">(</span><span class="s1">&#39;title&#39;</span><span class="o">,</span> <span class="nv">True</span><span class="o">)|</span><span class="nf">trim</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfilter</span> <span class="cp">%}</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span><span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<div class="section">
<h2><a id="vim-syntax-highlighting" name="vim-syntax-highlighting">Vim Syntax Highlighting</a></h2>
<p>Because of the similar syntax to django you can use the django highlighting
plugin for jinja too. There is however a Jinja syntax highlighting plugin
too which supports all of the syntax elements.</p>
<p>You can download it from the vim webpage: <a class="reference" href="http://www.vim.org/scripts/script.php?script_id=1856">jinja.vim</a></p>
</div>

    </div>
  </div>
</body>
<!-- generated on: 2007-11-17 18:18:07.460459
     file id: recipies -->
</html>